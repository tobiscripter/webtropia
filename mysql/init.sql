-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema SELK_APP
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `SELK_APP` ;

-- -----------------------------------------------------
-- Schema SELK_APP
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `SELK_APP` DEFAULT CHARACTER SET utf8mb4 ;
USE `SELK_APP` ;

-- -----------------------------------------------------
-- Table `SELK_APP`.`CALENDAR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CALENDAR` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CALENDAR` (
  `ID` INT(11) NOT NULL,
  `NAME` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_TYPE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_TYPE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_TYPE` (
  `TYPE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`TYPE`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(255) NOT NULL,
  `DESCRIPTION` TEXT NULL DEFAULT NULL,
  `TAGS` VARCHAR(45) NULL DEFAULT NULL,
  `CREATE_TIME` DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
  `TYPE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_CHAT_CHAT_TYPE1_idx` (`TYPE` ASC) VISIBLE,
  CONSTRAINT `fk_CHAT_CHAT_TYPE1`
    FOREIGN KEY (`TYPE`)
    REFERENCES `SELK_APP`.`CHAT_TYPE` (`TYPE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`COMMUNITY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`COMMUNITY` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`COMMUNITY` (
  `ID` INT(11) NOT NULL,
  `NAME` VARCHAR(255) NOT NULL,
  `CHAT_ID` INT(11) NOT NULL,
  `ALIVE` TINYINT(4) NULL DEFAULT 0,
  PRIMARY KEY (`ID`),
  INDEX `fk_COMMUNITY_CHAT1_idx` (`CHAT_ID` ASC) VISIBLE,
  CONSTRAINT `fk_COMMUNITY_CHAT1`
    FOREIGN KEY (`CHAT_ID`)
    REFERENCES `SELK_APP`.`CHAT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CONTENT_SERIES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CONTENT_SERIES` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CONTENT_SERIES` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`USER_TYPE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`USER_TYPE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`USER_TYPE` (
  `NAME` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`NAME`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`USER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`USER` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`USER` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `TYPE` VARCHAR(50) NOT NULL,
  `EMAIL` VARCHAR(255) NOT NULL,
  `USERNAME` VARCHAR(100) NOT NULL,
  `PUBLIC_KEY` VARCHAR(500) NOT NULL,
  `PRIVATE_KEY` VARCHAR(1500) NOT NULL,
  `PASSWORD` VARCHAR(255) NOT NULL,
  `SALT` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC) VISIBLE,
  INDEX `fk_USER_USER_TYPE1_idx` (`TYPE` ASC) VISIBLE,
  CONSTRAINT `fk_USER_USER_TYPE1`
    FOREIGN KEY (`TYPE`)
    REFERENCES `SELK_APP`.`USER_TYPE` (`NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 7
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`EVENT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`EVENT` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`EVENT` (
  `ID` INT(11) NOT NULL,
  `NAME` VARCHAR(255) NOT NULL,
  `CALENDAR_ID` INT(11) NULL DEFAULT NULL,
  `START` DATETIME NULL DEFAULT NULL,
  `END` DATETIME NULL DEFAULT NULL,
  `INFO` TEXT NULL DEFAULT NULL,
  `CONTACT` INT(11) NULL DEFAULT NULL,
  `COMMUNITY` INT(11) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_EVENT_CALENDAR1_idx` (`CALENDAR_ID` ASC) VISIBLE,
  INDEX `fk_EVENT_USER1_idx` (`CONTACT` ASC) VISIBLE,
  INDEX `fk_EVENT_COMMUNITY1_idx` (`COMMUNITY` ASC) VISIBLE,
  CONSTRAINT `fk_EVENT_CALENDAR1`
    FOREIGN KEY (`CALENDAR_ID`)
    REFERENCES `SELK_APP`.`CALENDAR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EVENT_COMMUNITY1`
    FOREIGN KEY (`COMMUNITY`)
    REFERENCES `SELK_APP`.`COMMUNITY` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EVENT_USER1`
    FOREIGN KEY (`CONTACT`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`AUDIENCE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`AUDIENCE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`AUDIENCE` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `EVENT_ID` INT(11) NULL DEFAULT NULL,
  `COMMUNITY_ID` INT(11) NULL DEFAULT NULL,
  `CHAT_ID` INT(11) NULL DEFAULT NULL,
  `CONTENT_SERIES_ID` INT(11) NULL DEFAULT NULL,
  `CALENDAR_ID` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_AUDIENCE_EVENT1_idx` (`EVENT_ID` ASC) VISIBLE,
  INDEX `fk_AUDIENCE_COMMUNITY1_idx` (`COMMUNITY_ID` ASC) VISIBLE,
  INDEX `fk_AUDIENCE_CHAT1_idx` (`CHAT_ID` ASC) VISIBLE,
  INDEX `fk_AUDIENCE_CONTENT_SERIES1_idx` (`CONTENT_SERIES_ID` ASC) VISIBLE,
  INDEX `fk_AUDIENCE_CALENDAR1_idx` (`CALENDAR_ID` ASC) VISIBLE,
  CONSTRAINT `fk_AUDIENCE_CALENDAR1`
    FOREIGN KEY (`CALENDAR_ID`)
    REFERENCES `SELK_APP`.`CALENDAR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AUDIENCE_CHAT1`
    FOREIGN KEY (`CHAT_ID`)
    REFERENCES `SELK_APP`.`CHAT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AUDIENCE_COMMUNITY1`
    FOREIGN KEY (`COMMUNITY_ID`)
    REFERENCES `SELK_APP`.`COMMUNITY` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AUDIENCE_CONTENT_SERIES1`
    FOREIGN KEY (`CONTENT_SERIES_ID`)
    REFERENCES `SELK_APP`.`CONTENT_SERIES` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AUDIENCE_EVENT1`
    FOREIGN KEY (`EVENT_ID`)
    REFERENCES `SELK_APP`.`EVENT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CALENDAR_SUBSCRIPTION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CALENDAR_SUBSCRIPTION` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CALENDAR_SUBSCRIPTION` (
  `CALENDAR_ID` INT(11) NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  PRIMARY KEY (`CALENDAR_ID`, `USER_ID`),
  INDEX `fk_CALENDAR_has_USER_USER1_idx` (`USER_ID` ASC) VISIBLE,
  INDEX `fk_CALENDAR_has_USER_CALENDAR1_idx` (`CALENDAR_ID` ASC) VISIBLE,
  CONSTRAINT `fk_CALENDAR_has_USER_CALENDAR1`
    FOREIGN KEY (`CALENDAR_ID`)
    REFERENCES `SELK_APP`.`CALENDAR` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CALENDAR_has_USER_USER1`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_MESSAGE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_MESSAGE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_MESSAGE` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `AUTHOR` INT(11) NOT NULL,
  `RECIEVER` INT(11) NOT NULL,
  `CHAT_ID` INT(11) NOT NULL,
  `MESSAGE` TEXT NULL DEFAULT NULL,
  `SEND_TIME` DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
  PRIMARY KEY (`ID`),
  INDEX `fk_CHAT_MESSAGE_USER1_idx` (`AUTHOR` ASC) VISIBLE,
  INDEX `fk_CHAT_MESSAGE_USER2_idx` (`RECIEVER` ASC) VISIBLE,
  INDEX `fk_CHAT_MESSAGE_CHAT1_idx` (`CHAT_ID` ASC) VISIBLE,
  CONSTRAINT `fk_CHAT_MESSAGE_CHAT1`
    FOREIGN KEY (`CHAT_ID`)
    REFERENCES `SELK_APP`.`CHAT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CHAT_MESSAGE_USER1`
    FOREIGN KEY (`AUTHOR`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CHAT_MESSAGE_USER2`
    FOREIGN KEY (`RECIEVER`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_POLICY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_POLICY` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_POLICY` (
  `POLICY` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`POLICY`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_ROLE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_ROLE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_ROLE` (
  `NAME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`NAME`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_TYPE_POLICY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_TYPE_POLICY` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_TYPE_POLICY` (
  `CHAT_TYPE_TYPE` VARCHAR(45) NOT NULL,
  `CHAT_POLICY_POLICY` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CHAT_TYPE_TYPE`, `CHAT_POLICY_POLICY`),
  INDEX `fk_CHAT_TYPE_has_CHAT_POLICY_CHAT_POLICY1_idx` (`CHAT_POLICY_POLICY` ASC) VISIBLE,
  INDEX `fk_CHAT_TYPE_has_CHAT_POLICY_CHAT_TYPE1_idx` (`CHAT_TYPE_TYPE` ASC) VISIBLE,
  CONSTRAINT `fk_CHAT_TYPE_has_CHAT_POLICY_CHAT_POLICY1`
    FOREIGN KEY (`CHAT_POLICY_POLICY`)
    REFERENCES `SELK_APP`.`CHAT_POLICY` (`POLICY`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CHAT_TYPE_has_CHAT_POLICY_CHAT_TYPE1`
    FOREIGN KEY (`CHAT_TYPE_TYPE`)
    REFERENCES `SELK_APP`.`CHAT_TYPE` (`TYPE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_USER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_USER` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_USER` (
  `USER_ID` INT(11) NOT NULL,
  `CHAT_ID` INT(11) NOT NULL,
  `ROLE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`USER_ID`, `CHAT_ID`),
  INDEX `fk_USER_has_CHAT_CHAT1_idx` (`CHAT_ID` ASC) VISIBLE,
  INDEX `fk_USER_has_CHAT_USER1_idx` (`USER_ID` ASC) VISIBLE,
  INDEX `fk_CHAT_USER_CHAT_ROLE1_idx` (`ROLE` ASC) VISIBLE,
  CONSTRAINT `fk_CHAT_USER_CHAT_ROLE1`
    FOREIGN KEY (`ROLE`)
    REFERENCES `SELK_APP`.`CHAT_ROLE` (`NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USER_has_CHAT_CHAT1`
    FOREIGN KEY (`CHAT_ID`)
    REFERENCES `SELK_APP`.`CHAT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USER_has_CHAT_USER1`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`COMMUNITY_MEMBER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`COMMUNITY_MEMBER` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`COMMUNITY_MEMBER` (
  `COMMUNITY_ID` INT(11) NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  PRIMARY KEY (`COMMUNITY_ID`, `USER_ID`),
  INDEX `fk_COMMUNITY_has_USER_USER1_idx` (`USER_ID` ASC) VISIBLE,
  INDEX `fk_COMMUNITY_has_USER_COMMUNITY1_idx` (`COMMUNITY_ID` ASC) VISIBLE,
  CONSTRAINT `fk_COMMUNITY_has_USER_COMMUNITY1`
    FOREIGN KEY (`COMMUNITY_ID`)
    REFERENCES `SELK_APP`.`COMMUNITY` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMMUNITY_has_USER_USER1`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CONTENT_TYPE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CONTENT_TYPE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CONTENT_TYPE` (
  `TYPE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`TYPE`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CONTENT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CONTENT` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CONTENT` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `AUTHOR` INT(11) NOT NULL,
  `CONTENT_SERIES_ID` INT(11) NOT NULL,
  `PUBLISH_TIME` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP(),
  `TITLE` VARCHAR(255) NOT NULL,
  `CONTENT` TEXT NOT NULL,
  `CONTENT_TYPE_TYPE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_CONTENT_USER1_idx` (`AUTHOR` ASC) VISIBLE,
  INDEX `fk_CONTENT_CONTENT_SERIES1_idx` (`CONTENT_SERIES_ID` ASC) VISIBLE,
  INDEX `fk_CONTENT_CONTENT_TYPE1_idx` (`CONTENT_TYPE_TYPE` ASC) VISIBLE,
  CONSTRAINT `fk_CONTENT_CONTENT_SERIES1`
    FOREIGN KEY (`CONTENT_SERIES_ID`)
    REFERENCES `SELK_APP`.`CONTENT_SERIES` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CONTENT_USER1`
    FOREIGN KEY (`AUTHOR`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CONTENT_CONTENT_TYPE1`
    FOREIGN KEY (`CONTENT_TYPE_TYPE`)
    REFERENCES `SELK_APP`.`CONTENT_TYPE` (`TYPE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CONTENT_AUDIENCE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CONTENT_AUDIENCE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CONTENT_AUDIENCE` (
  `AUDIENCE_ID` INT(11) NOT NULL,
  PRIMARY KEY (`AUDIENCE_ID`),
  INDEX `fk_CONTENT_has_AUDIENCE_AUDIENCE1_idx` (`AUDIENCE_ID` ASC) VISIBLE,
  CONSTRAINT `fk_CONTENT_has_AUDIENCE_AUDIENCE1`
    FOREIGN KEY (`AUDIENCE_ID`)
    REFERENCES `SELK_APP`.`AUDIENCE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`DEVICE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`DEVICE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`DEVICE` (
  `ID` VARCHAR(255) NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_DEVICE_USER1_idx` (`USER_ID` ASC) VISIBLE,
  CONSTRAINT `fk_DEVICE_USER1`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`EVENT_USER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`EVENT_USER` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`EVENT_USER` (
  `EVENT_ID` INT(11) NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  PRIMARY KEY (`EVENT_ID`, `USER_ID`),
  INDEX `fk_EVENT_has_USER_USER1_idx` (`USER_ID` ASC) VISIBLE,
  INDEX `fk_EVENT_has_USER_EVENT1_idx` (`EVENT_ID` ASC) VISIBLE,
  CONSTRAINT `fk_EVENT_has_USER_EVENT1`
    FOREIGN KEY (`EVENT_ID`)
    REFERENCES `SELK_APP`.`EVENT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EVENT_has_USER_USER1`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`SETTING_TYPE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`SETTING_TYPE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`SETTING_TYPE` (
  `TYPE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`TYPE`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`SETTING`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`SETTING` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`SETTING` (
  `ID` INT(11) NOT NULL,
  `NAME` VARCHAR(45) NULL DEFAULT NULL,
  `POSITION` INT(11) NULL DEFAULT NULL,
  `GROUP` VARCHAR(255) NULL DEFAULT NULL,
  `SETTING_TYPE_TYPE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_SETTING_SETTING_TYPE1_idx` (`SETTING_TYPE_TYPE` ASC) VISIBLE,
  CONSTRAINT `fk_SETTING_SETTING_TYPE1`
    FOREIGN KEY (`SETTING_TYPE_TYPE`)
    REFERENCES `SELK_APP`.`SETTING_TYPE` (`TYPE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`SETTING_OPTION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`SETTING_OPTION` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`SETTING_OPTION` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `SETTING_ID` INT(11) NOT NULL,
  `VALUE` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_SETTING_OPTION_SETTING1_idx` (`SETTING_ID` ASC) VISIBLE,
  CONSTRAINT `fk_SETTING_OPTION_SETTING1`
    FOREIGN KEY (`SETTING_ID`)
    REFERENCES `SELK_APP`.`SETTING` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`USER_AUDIENCE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`USER_AUDIENCE` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`USER_AUDIENCE` (
  `AUDIENCE_ID` INT(11) NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  PRIMARY KEY (`AUDIENCE_ID`, `USER_ID`),
  INDEX `fk_AUDIENCE_has_USER_USER1_idx` (`USER_ID` ASC) VISIBLE,
  INDEX `fk_AUDIENCE_has_USER_AUDIENCE1_idx` (`AUDIENCE_ID` ASC) VISIBLE,
  CONSTRAINT `fk_AUDIENCE_has_USER_AUDIENCE1`
    FOREIGN KEY (`AUDIENCE_ID`)
    REFERENCES `SELK_APP`.`AUDIENCE` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AUDIENCE_has_USER_USER1`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`USER_PERMISSION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`USER_PERMISSION` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`USER_PERMISSION` (
  `NAME` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`NAME`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`USER_SETTINGS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`USER_SETTINGS` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`USER_SETTINGS` (
  `USER_ID` INT(11) NOT NULL,
  `SETTING_ID` INT(11) NOT NULL,
  `VALUE` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`USER_ID`, `SETTING_ID`),
  INDEX `fk_USER_has_SETTING_SETTING1_idx` (`SETTING_ID` ASC) VISIBLE,
  INDEX `fk_USER_has_SETTING_USER1_idx` (`USER_ID` ASC) VISIBLE,
  CONSTRAINT `fk_USER_has_SETTING_SETTING1`
    FOREIGN KEY (`SETTING_ID`)
    REFERENCES `SELK_APP`.`SETTING` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USER_has_SETTING_USER1`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `SELK_APP`.`USER` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`USER_TYPE_PERMISSION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`USER_TYPE_PERMISSION` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`USER_TYPE_PERMISSION` (
  `USER_TYPE_NAME` VARCHAR(50) NOT NULL,
  `USER_PERMISSION_NAME` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`USER_TYPE_NAME`, `USER_PERMISSION_NAME`),
  INDEX `fk_USER_TYPE_has_USER_PERMISSION_USER_PERMISSION1_idx` (`USER_PERMISSION_NAME` ASC) VISIBLE,
  INDEX `fk_USER_TYPE_has_USER_PERMISSION_USER_TYPE_idx` (`USER_TYPE_NAME` ASC) VISIBLE,
  CONSTRAINT `fk_USER_TYPE_has_USER_PERMISSION_USER_PERMISSION1`
    FOREIGN KEY (`USER_PERMISSION_NAME`)
    REFERENCES `SELK_APP`.`USER_PERMISSION` (`NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USER_TYPE_has_USER_PERMISSION_USER_TYPE`
    FOREIGN KEY (`USER_TYPE_NAME`)
    REFERENCES `SELK_APP`.`USER_TYPE` (`NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_PERMISSION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_PERMISSION` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_PERMISSION` (
  `NAME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`NAME`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SELK_APP`.`CHAT_ROLE_PERMISSION`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SELK_APP`.`CHAT_ROLE_PERMISSION` ;

CREATE TABLE IF NOT EXISTS `SELK_APP`.`CHAT_ROLE_PERMISSION` (
  `CHAT_ROLE` VARCHAR(45) NOT NULL,
  `CHAT_PERMISSION` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`CHAT_ROLE`, `CHAT_PERMISSION`),
  INDEX `fk_CHAT_ROLE_has_CHAT_PERMISSION_CHAT_PERMISSION1_idx` (`CHAT_PERMISSION` ASC) VISIBLE,
  INDEX `fk_CHAT_ROLE_has_CHAT_PERMISSION_CHAT_ROLE1_idx` (`CHAT_ROLE` ASC) VISIBLE,
  CONSTRAINT `fk_CHAT_ROLE_has_CHAT_PERMISSION_CHAT_ROLE1`
    FOREIGN KEY (`CHAT_ROLE`)
    REFERENCES `SELK_APP`.`CHAT_ROLE` (`NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CHAT_ROLE_has_CHAT_PERMISSION_CHAT_PERMISSION1`
    FOREIGN KEY (`CHAT_PERMISSION`)
    REFERENCES `SELK_APP`.`CHAT_PERMISSION` (`NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `SELK_APP`.`CHAT_TYPE`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`CHAT_TYPE` (`TYPE`) VALUES ('PRIVATE');
INSERT INTO `SELK_APP`.`CHAT_TYPE` (`TYPE`) VALUES ('GROUP');
INSERT INTO `SELK_APP`.`CHAT_TYPE` (`TYPE`) VALUES ('ANONYM');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SELK_APP`.`USER_TYPE`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`USER_TYPE` (`NAME`) VALUES ('USER');
INSERT INTO `SELK_APP`.`USER_TYPE` (`NAME`) VALUES ('ADMIN');
INSERT INTO `SELK_APP`.`USER_TYPE` (`NAME`) VALUES ('PUBLIC');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SELK_APP`.`CHAT_ROLE`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`CHAT_ROLE` (`NAME`) VALUES ('APPLICANT');
INSERT INTO `SELK_APP`.`CHAT_ROLE` (`NAME`) VALUES ('USER');
INSERT INTO `SELK_APP`.`CHAT_ROLE` (`NAME`) VALUES ('ADMIN');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SELK_APP`.`SETTING_TYPE`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`SETTING_TYPE` (`TYPE`) VALUES ('BOOL');
INSERT INTO `SELK_APP`.`SETTING_TYPE` (`TYPE`) VALUES ('TEXT');
INSERT INTO `SELK_APP`.`SETTING_TYPE` (`TYPE`) VALUES ('ENUM');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SELK_APP`.`USER_PERMISSION`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`USER_PERMISSION` (`NAME`) VALUES ('PUBLIC');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SELK_APP`.`USER_TYPE_PERMISSION`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`USER_TYPE_PERMISSION` (`USER_TYPE_NAME`, `USER_PERMISSION_NAME`) VALUES ('PUBLIC', 'PUBLIC');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SELK_APP`.`CHAT_PERMISSION`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`CHAT_PERMISSION` (`NAME`) VALUES ('READ');
INSERT INTO `SELK_APP`.`CHAT_PERMISSION` (`NAME`) VALUES ('WRITE');
INSERT INTO `SELK_APP`.`CHAT_PERMISSION` (`NAME`) VALUES ('EDIT');

COMMIT;


-- -----------------------------------------------------
-- Data for table `SELK_APP`.`CHAT_ROLE_PERMISSION`
-- -----------------------------------------------------
START TRANSACTION;
USE `SELK_APP`;
INSERT INTO `SELK_APP`.`CHAT_ROLE_PERMISSION` (`CHAT_ROLE`, `CHAT_PERMISSION`) VALUES ('USER', 'READ');
INSERT INTO `SELK_APP`.`CHAT_ROLE_PERMISSION` (`CHAT_ROLE`, `CHAT_PERMISSION`) VALUES ('USER', 'WRITE');
INSERT INTO `SELK_APP`.`CHAT_ROLE_PERMISSION` (`CHAT_ROLE`, `CHAT_PERMISSION`) VALUES ('ADMIN', 'READ');
INSERT INTO `SELK_APP`.`CHAT_ROLE_PERMISSION` (`CHAT_ROLE`, `CHAT_PERMISSION`) VALUES ('ADMIN', 'WRITE');
INSERT INTO `SELK_APP`.`CHAT_ROLE_PERMISSION` (`CHAT_ROLE`, `CHAT_PERMISSION`) VALUES ('ADMIN', 'EDIT');

COMMIT;

